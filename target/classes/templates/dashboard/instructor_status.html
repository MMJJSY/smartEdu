<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>ê°•ì‚¬ ìˆ˜ì • ìš”ì²­ ëª©ë¡</title>
    <link rel="stylesheet" th:href="@{/css/admin_dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/paging.css}">
    <style>
        .approval-table tbody tr {
            transition: background .15s ease;
        }

        .approval-table tbody tr:hover {
            background: #f7fbff;
        }

        .btn-download {
            color: #2d6cdf;
            text-decoration: underline;
        }

        .status.pending {
            color: #e67e22;
            font-weight: 700;
        }

        .status.active {
            color: #16a34a;
            font-weight: 700;
        }

        .status.inactive {
            color: #dc2626;
            font-weight: 700;
        }

        .empty-row {
            text-align: center;
            color: #94a3b8;
        }

        .filter-box {
            display: flex;
            justify-content: flex-start;
            /* â† ë³€ê²½ */
            margin: 10px 0 18px;
            gap: 8px;
            width: 100%;
        }

        .filter-box select {
            padding: 8px 10px;
            border: 1px solid #dce2ee;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <main class="admin-dashboard">

        <h2>ê°•ì‚¬ ìˆ˜ì • ìš”ì²­ ëª©ë¡</h2>

        <!-- âœ… í•„í„° ì˜ì—­ -->
        <div class="filter-box">
            <!-- ğŸ”¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤í•‘ê³¼ ë™ì¼í•œ ê²½ë¡œë¡œ í†µì¼ -->
            <form th:action="@{/member/dashboard/instructor_status}" method="get" style="margin:0;">
                <label>ìƒíƒœ í•„í„°:</label>
                <select name="filter" onchange="this.form.submit()">
                    <option value="" th:selected="${selectedFilter == ''}">ì „ì²´</option>
                    <option value="PENDING" th:selected="${selectedFilter == 'PENDING'}">ëŒ€ê¸°</option>
                    <option value="APPROVED" th:selected="${selectedFilter == 'APPROVED'}">ìŠ¹ì¸ë¨</option>
                    <option value="REJECTED" th:selected="${selectedFilter == 'REJECTED'}">ê±°ì ˆë¨</option>
                </select>
            </form>
        </div>

        <!-- âœ… ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸” (ë·°ì—ì„œëŠ” ì¶”ê°€ í•„í„°ë§ ì—†ì´ ê·¸ëŒ€ë¡œ ì¶œë ¥) -->
        <table class="approval-table">
            <thead>
                <tr>
                    <th>ì´ë¦„</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ì´ë ¥ì„œ</th>
                    <th>ìƒíƒœ</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="inst : ${instructorList}"
                    th:onclick="|openDetailPopup('@{/member/detail(instructorId=${inst.instructorId})}')|"
                    style="cursor:pointer;">
                    <td th:text="${inst.name}">í™ê¸¸ë™</td>
                    <td th:text="${inst.email}">hong@test.com</td>
                    <td>
                        <a th:if="${inst.resume != null}" th:href="@{'/upload/resume/' + ${inst.resume}}"
                            class="btn-download" download>ì´ë ¥ì„œ ë‹¤ìš´ë¡œë“œ</a>
                        <span th:if="${inst.resume == null}" style="color:#94a3b8;">ì²¨ë¶€ ì—†ìŒ</span>
                    </td>
                    <td>
                        <span th:switch="${inst.pendingStatus}">
                            <span th:case="${T(com.application.smartEdu.enums.PendingStatus).PENDING}"
                                class="status pending">ëŒ€ê¸°</span>
                            <span th:case="${T(com.application.smartEdu.enums.PendingStatus).APPROVED}"
                                class="status active">ìŠ¹ì¸ë¨</span>
                            <span th:case="${T(com.application.smartEdu.enums.PendingStatus).REJECTED}"
                                class="status inactive">ê±°ì ˆë¨</span>
                            <span th:case="*">-</span>
                        </span>
                    </td>
                </tr>

                <!-- ë¹„ì—ˆì„ ë•Œ -->
                <tr th:if="${#lists.isEmpty(instructorList)}">
                    <td colspan="4" class="empty-row">í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
                </tr>
            </tbody>
        </table>

        <!-- âœ… ê³µìš© í˜ì´ì§€ë„¤ì´ì…˜ -->
        <div class="pagination">
            <th:block th:insert="~{modules/paging.html}" />
        </div>
    </main>

    <script>
        function openDetailPopup(url) {
            const width = 900, height = 700;
            const left = (window.screen.width - width) / 2;
            const top = (window.screen.height - height) / 2;
            const opts = `width=${width},height=${height},left=${left},top=${top},resizable=yes,scrollbars=yes,status=no`;
            window.open(url, "_blank", opts);
        }
    </script>

</body>

</html>