<link rel="stylesheet" th:href="@{/css/paging.css}" />

<nav aria-label="Page navigation" class="pagination-wrapper">
  <ul class="pagination justify-content-center">

    <!-- 처음 -->
    <li class="page-item" th:classappend="${!pageMaker.prev} ? ' disabled'">
      <a class="page-link" href="javascript:void(0);" th:onclick="${pageMaker.prev} ? 'search_list(1)' : ''">
        <i class="fas fa-angle-double-left"></i>
      </a>
    </li>

    <!-- 이전 -->
    <li class="page-item" th:classappend="${!pageMaker.prev} ? ' disabled'">
      <a class="page-link" href="javascript:void(0);"
        th:onclick="${pageMaker.prev} ? 'search_list(' + (${pageMaker.startPage} - 1) + ')' : ''">
        <i class="fas fa-angle-left"></i>
      </a>
    </li>

    <!-- 페이지 번호 -->
    <th:block th:each="num : ${#numbers.sequence(pageMaker.startPage, pageMaker.endPage)}">
      <li th:class="|page-item ${num eq pageMaker.page ? 'active' : ''}|">
        <a class="page-link" href="javascript:void(0);" th:text="${num}" th:onclick="|search_list(${num})|"></a>
      </li>
    </th:block>

    <!-- 다음 -->
    <li class="page-item" th:classappend="${!pageMaker.next} ? ' disabled'">
      <a class="page-link" href="javascript:void(0);"
        th:onclick="${pageMaker.next} ? 'search_list(' + (${pageMaker.endPage} + 1) + ')' : ''">
        <i class="fas fa-angle-right"></i>
      </a>
    </li>

    <!-- 마지막 -->
    <li class="page-item" th:classappend="${!pageMaker.next} ? ' disabled'">
      <a class="page-link" href="javascript:void(0);"
        th:onclick="${pageMaker.next} ? 'search_list(' + ${pageMaker.realEndPage} + ')' : ''">
        <i class="fas fa-angle-double-right"></i>
      </a>
    </li>

  </ul>
</nav>

<!-- ✅ 페이지 폼 (필수) -->
<form id="jobForm" th:action="@{${pageUrl}}" method="get">
  <input type="hidden" name="page" th:value="${pageMaker.page}" />
  <input type="hidden" name="perPageNum" th:value="${pageMaker.perPageNum}" />
  <input type="hidden" name="role" th:value="${role}" />
  <input type="hidden" name="filterType" th:value="${filterType}" />
  <input type="hidden" name="filter" th:value="${selectedFilter}" />
</form>

<!-- ✅ 페이지 전환 스크립트 -->
<script>
  function search_list(page) {
    const form = document.querySelector("#jobForm");
    form.page.value = page;
    form.submit();
  }
</script>